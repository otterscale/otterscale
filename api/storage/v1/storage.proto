edition = "2023";

package otterscale.storage.v1;

import "api/annotations.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/otterscale/otterscale/api/storage/v1;pb";

service StorageService {
  rpc ListMonitors(ListMonitorsRequest) returns (ListMonitorsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListObjectStorageDaemons(ListObjectStorageDaemonsRequest) returns (ListObjectStorageDaemonsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DoSMART(DoSMARTRequest) returns (DoSMARTResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListPools(ListPoolsRequest) returns (ListPoolsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreatePool(CreatePoolRequest) returns (Pool) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdatePool(UpdatePoolRequest) returns (Pool) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeletePool(DeletePoolRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListImages(ListImagesRequest) returns (ListImagesResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateImage(CreateImageRequest) returns (Image) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateImage(UpdateImageRequest) returns (Image) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteImage(DeleteImageRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateImageSnapshot(CreateImageSnapshotRequest) returns (Image.Snapshot) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteImageSnapshot(DeleteImageSnapshotRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc RollbackImageSnapshot(RollbackImageSnapshotRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ProtectImageSnapshot(ProtectImageSnapshotRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UnprotectImageSnapshot(UnprotectImageSnapshotRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListVolumes(ListVolumesRequest) returns (ListVolumesResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListSubvolumes(ListSubvolumesRequest) returns (ListSubvolumesResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateSubvolume(CreateSubvolumeRequest) returns (Subvolume) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc GetSubvolume(GetSubvolumeRequest) returns (Subvolume) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateSubvolume(UpdateSubvolumeRequest) returns (Subvolume) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteSubvolume(DeleteSubvolumeRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListNFSExports(ListNFSExportsRequest) returns (ListNFSExportsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ApplyNFSExport(ApplyNFSExportRequest) returns (NfsExport) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc GetNFSExport(GetNFSExportRequest) returns (NfsExport) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteNFSExport(DeleteNFSExportRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  /*rpc GrantSubvolumeExportAccess(GrantSubvolumeExportAccessRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc RevokeSubvolumeExportAccess(RevokeSubvolumeExportAccessRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };*/

  /*rpc CreateSubvolumeSnapshot(CreateSubvolumeSnapshotRequest) returns (Subvolume.Snapshot) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteSubvolumeSnapshot(DeleteSubvolumeSnapshotRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };*/

  rpc ListSubvolumeGroups(ListSubvolumeGroupsRequest) returns (ListSubvolumeGroupsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateSubvolumeGroup(CreateSubvolumeGroupRequest) returns (SubvolumeGroup) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateSubvolumeGroup(UpdateSubvolumeGroupRequest) returns (SubvolumeGroup) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteSubvolumeGroup(DeleteSubvolumeGroupRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListBuckets(ListBucketsRequest) returns (ListBucketsResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateBucket(CreateBucketRequest) returns (Bucket) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateBucket(UpdateBucketRequest) returns (Bucket) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteBucket(DeleteBucketRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateUser(CreateUserRequest) returns (User) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateUser(UpdateUserRequest) returns (User) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteUser(DeleteUserRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateUserKey(CreateUserKeyRequest) returns (User.Key) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc DeleteUserKey(DeleteUserKeyRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ListSMBShares(ListSMBSharesRequest) returns (ListSMBSharesResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc CreateSMBShare(CreateSMBShareRequest) returns (SMBShare) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc UpdateSMBShare(UpdateSMBShareRequest) returns (SMBShare) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };

  rpc ValidateSMBUser(ValidateSMBUserRequest) returns (ValidateSMBUserResponse) {
    option (otterscale.api.feature) = {
      name: "distributed-storage-enabled"
    };
  };
}

message Machine {
  string id = 1;
  string hostname = 2;
}

message Monitor {
  bool leader = 1;
  string name = 2;
  uint64 rank = 3;
  string public_address = 4;
  Machine machine = 101;
}

message ObjectStorageDaemon {
  int64 id = 1;
  string name = 2;
  bool up = 3;
  bool in = 4;
  bool exists = 5;
  string device_class = 11;
  uint64 size_bytes = 12;
  uint64 used_bytes = 13;
  uint64 placement_group_count = 21;
  Machine machine = 101;
}

message Pool {
  enum Type {
    TYPE_UNSPECIFIED = 0;
    TYPE_ERASURE = 1;
    TYPE_REPLICATED = 2;
  }
  enum Application {
    APPLICATION_UNSPECIFIED = 0;
    APPLICATION_BLOCK = 1;
    APPLICATION_FILE = 2;
    APPLICATION_OBJECT = 3;
  }
  int64 id = 1;
  string name = 2;
  bool updating = 3;
  Type type = 11;
  bool ec_overwrites = 21; // erasure
  uint64 data_chunks = 22; // erasure k
  uint64 coding_chunks = 23; // erasure m
  uint64 replicated_size = 31; // replicated
  uint64 quota_bytes = 41;
  uint64 quota_objects = 42;
  uint64 used_bytes = 43;
  uint64 used_objects = 44;
  uint64 max_bytes = 45;
  uint64 placement_group_count = 51;
  map<string, int64> placement_group_state = 52;
  google.protobuf.Timestamp created_at = 61;
  repeated Application applications = 71;
}

message Image {
  message Snapshot {
    string name = 1;
    bool protected = 2;
    uint64 quota_bytes = 3;
    uint64 used_bytes = 4;
  }
  string name = 1;
  string pool_name = 11;
  uint64 object_size_bytes = 21;
  uint64 stripe_unit_bytes = 22;
  uint64 stripe_count = 23;
  uint64 quota_bytes = 31;
  uint64 used_bytes = 32;
  uint64 object_count = 33;
  bool layering = 41;
  bool exclusive_lock = 42;
  bool object_map = 43;
  bool fast_diff = 44;
  bool deep_flatten = 45;
  google.protobuf.Timestamp created_at = 51;
  repeated Snapshot snapshots = 101;
}

message Volume {
  int64 id = 1;
  string name = 2;
  google.protobuf.Timestamp created_at = 11;
}

message SubvolumeInfo {
  enum SubvolumeState  {
    SUBVOLUME_STATE_UNSPECIFIED = 0;
    SUBVOLUME_STATE_INIT = 1;
    SUBVOLUME_STATE_PENDING = 2;
    SUBVOLUME_STATE_IN_PROGRESS = 3;
    SUBVOLUME_STATE_FAILED = 4;
    SUBVOLUME_STATE_COMPLETE = 5;
    SUBVOLUME_STATE_CANCELED = 6;
    SUBVOLUME_STATE_SNAPSHOT_RETAINED = 7;
  }
  enum Feature {
    FEATURE_UNSPECIFIED = 0;
    FEATURE_SNAPSHOT_CLONE = 1;
    FEATURE_SNAPSHOT_AUTOPROTECT = 2;
    FEATURE_SNAPSHOT_RETENTION = 3;
  }
  string path = 1;
  SubvolumeState state = 2;
  uint32 uid = 3 [features.field_presence = EXPLICIT];
  uint32 gid = 4 [features.field_presence = EXPLICIT];
  uint32 mode = 5 [features.field_presence = EXPLICIT];  
  double bytes_percent = 6 [features.field_presence = EXPLICIT];
  uint64 bytes_used = 7;
  uint64 bytes_quota = 8 [features.field_presence = EXPLICIT];
  string data_pool = 9;
  string pool_namespace = 10;
  google.protobuf.Timestamp atime = 11;
  google.protobuf.Timestamp mtime = 12;
  google.protobuf.Timestamp ctime = 13;
  google.protobuf.Timestamp created_at = 14;
  repeated Feature features = 15;
}

message Subvolume {
  string volume_name = 1;
  string group_name = 2;
  string subvolume_name = 3;
  SubvolumeInfo info = 4;
}

message SubvolumeListItem {
  string subvolume_name = 1;
  SubvolumeInfo info = 2;
}

enum NfsProtocol {
  NFS_PROTOCOL_UNSPECIFIED = 0;
  NFS_PROTOCOL_V3 = 3;
  NFS_PROTOCOL_V4 = 4;
}

enum NfsAccessType {
  NFS_ACCESS_TYPE_UNSPECIFIED = 0;
  NFS_ACCESS_TYPE_NONE = 1;
  NFS_ACCESS_TYPE_RW = 2;
  NFS_ACCESS_TYPE_RO = 3;
}

enum NfsSquash {
  NFS_SQUASH_UNSPECIFIED = 0;
  NFS_SQUASH_NONE = 1;
  NFS_SQUASH_ROOT = 2;
  NFS_SQUASH_ALL = 3;
  NFS_SQUASH_ROOTID = 4;
}

enum NfsTransport {
  NFS_TRANSPORT_UNSPECIFIED = 0;
  NFS_TRANSPORT_TCP = 1;
  NFS_TRANSPORT_UDP = 2;
}

enum NfsSecType {
  NFS_SECTYPE_UNSPECIFIED = 0;
  NFS_SECTYPE_SYS = 1;
  NFS_SECTYPE_NONE = 2;
  NFS_SECTYPE_KRB5 = 3;
  NFS_SECTYPE_KRB5I = 4;
  NFS_SECTYPE_KRB5P = 5;
}

message NfsClientRule {
  repeated string addresses = 1; // CIDR / IP / hostname
  NfsAccessType access_type = 2 [features.field_presence = EXPLICIT]; // optional if you want inheritance
  NfsSquash squash = 3 [features.field_presence = EXPLICIT]; // optional if you want inheritance
}

message NfsFsalInfo {
  string name = 1;
  string user_id = 2;
  string file_system_name = 3;
}

message CephFsTarget {
  string file_system_name = 1;
  string group_name = 2;
  string subvolume_name = 3;
}

message NfsExportSpec {
  bool enable_security_label = 1 [features.field_presence = EXPLICIT];
  repeated NfsProtocol protocols = 3; 
  string pseudo_path = 4;
  NfsAccessType access_type = 5 [features.field_presence = EXPLICIT];
  NfsSquash squash = 6 [features.field_presence = EXPLICIT];
  repeated NfsTransport transports = 7;
  repeated NfsClientRule clients = 8;
  repeated NfsSecType sectypes = 9;
}

message NfsExportInfo {
  uint64 export_id = 1;
  bool enable_security_label = 2;
  string path = 3;
  repeated NfsProtocol protocols = 4; 
  string pseudo_path = 5;
  NfsAccessType access_type = 6;
  NfsSquash squash = 7;
  repeated NfsTransport transports = 8; 
   NfsFsalInfo fsal = 9;
  repeated NfsClientRule clients = 10;
  repeated NfsSecType sectypes = 11;
}

message NfsExport {
  string cluster_id = 1; 
  CephFsTarget cephfs = 2;
  NfsExportInfo info = 3;
}

message SubvolumeGroup {
  string name = 1;
  string mode = 11; // oct
  string pool_name = 12;
  uint64 quota_bytes = 21;
  uint64 used_bytes = 22;
  google.protobuf.Timestamp created_at = 31;
}

message Bucket {
  enum ACL {
    ACL_PRIVATE = 0;
    ACL_PUBLIC_READ = 1;
    ACL_PUBLIC_READ_WRITE = 2;
    ACL_AUTHENTICATED_READ = 3;
  }
  message Grant {
    string type = 1;
    string id = 2;
    string name = 3;
    string uri = 4;
    string permission = 5;
  }
  string name = 1;
  string owner = 2;
  string policy = 21;
  repeated Grant grants = 22;
  uint64 used_bytes = 33;
  uint64 used_objects = 34;
  google.protobuf.Timestamp created_at = 41;
}

message User {
  message Key {
    string access_key = 1;
    string secret_key = 2;
  }
  string id = 1;
  string name = 2;
  bool suspended = 3;
  repeated Key keys = 21;
}

message SMBShare {
  message CommonConfig {
    enum MapToGuest {
      MAP_TO_GUEST_NEVER = 0;
      MAP_TO_GUEST_BAD_USER = 1;
      MAP_TO_GUEST_BAD_PASSWORD = 2;
    }
    MapToGuest map_to_guest = 1;
  }
  message SecurityConfig {
    enum Mode {
      MODE_USER = 0;
      MODE_ACTIVE_DIRECTORY = 1;
    }
    message User {
      string username = 1;
      string password = 2;
    }
    Mode mode = 1;
    repeated User local_users = 11;
    string realm = 21;
    User join_source = 22;
  }
  string name = 1;
  reserved 2;
  string uri = 3;
  int32 replicas = 11;
  int32 healthies = 12;
  uint64 size_bytes = 21;
  bool browsable = 31;
  bool read_only = 32;
  bool guest_ok = 41;
  repeated string valid_users = 42;
  CommonConfig common_config = 51;
  SecurityConfig security_config = 61;
}

message ListMonitorsRequest {
  string scope = 1;
  reserved 2;
}

message ListMonitorsResponse {
  repeated Monitor monitors = 1;
}

message ListObjectStorageDaemonsRequest {
  string scope = 1;
  reserved 2;
}

message ListObjectStorageDaemonsResponse {
  repeated ObjectStorageDaemon object_storage_daemons = 1;
}

message DoSMARTRequest {
  string scope = 1;
  reserved 2;
  string osd_name = 3;
}

message DoSMARTResponse {
  message Output {
    repeated string lines = 1;
  }
  map<string, Output> device_output_map = 1;
}

message ListPoolsRequest {
  string scope = 1;
  reserved 2;
  Pool.Application application = 11;
}

message ListPoolsResponse {
  repeated Pool pools = 1;
}

message CreatePoolRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  Pool.Type type = 11;
  bool ec_overwrites = 21; // erasure
  uint64 replicated_size = 31; // replicated
  uint64 quota_bytes = 41;
  uint64 quota_objects = 42;
  repeated Pool.Application applications = 61;
}

message UpdatePoolRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  uint64 quota_bytes = 41;
  uint64 quota_objects = 42;
}

message DeletePoolRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
}

message ListImagesRequest {
  string scope = 1;
  reserved 2;
}

message ListImagesResponse {
  repeated Image images = 1;
}

message CreateImageRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  uint64 object_size_bytes = 11;
  uint64 stripe_unit_bytes = 12;
  uint64 stripe_count = 13;
  uint64 quota_bytes = 21;
  bool layering = 31;
  bool exclusive_lock = 32;
  bool object_map = 33;
  bool fast_diff = 34;
  bool deep_flatten = 35;
}

message UpdateImageRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  uint64 quota_bytes = 11;
}

message DeleteImageRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
}

message CreateImageSnapshotRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  string snapshot_name = 5;
}

message DeleteImageSnapshotRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  string snapshot_name = 5;
}

message RollbackImageSnapshotRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  string snapshot_name = 5;
}

message ProtectImageSnapshotRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  string snapshot_name = 5;
}

message UnprotectImageSnapshotRequest {
  string scope = 1;
  reserved 2;
  string pool_name = 3;
  string image_name = 4;
  string snapshot_name = 5;
}

message ListVolumesRequest {
  string scope = 1;
  reserved 2;
}

message ListVolumesResponse {
  repeated Volume volumes = 1;
}

message ListSubvolumesRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
}

message ListSubvolumesResponse {
  repeated Subvolume subvolumes = 1;
}

message CreateSubvolumeRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
  string subvolume_name = 5;
  uint64 size = 6 [features.field_presence = EXPLICIT];
  uint32 uid = 7 [features.field_presence = EXPLICIT];
  uint32 gid = 8 [features.field_presence = EXPLICIT];
  uint32 mode = 9 [features.field_presence = EXPLICIT];
  string pool_layout = 10 [features.field_presence = EXPLICIT];
  bool is_namespace_isolated = 11 [features.field_presence = EXPLICIT];
}

message GetSubvolumeRequest {
  string scope = 1;
  string volume_name = 2;
  string group_name = 3;
  string subvolume_name = 4;
}

message UpdateSubvolumeRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
  string subvolume_name = 5;
  uint64 new_size = 6;
  bool no_shrink = 7 [features.field_presence = EXPLICIT];
}

message DeleteSubvolumeRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
  string subvolume_name = 5;
  bool is_force = 6   [features.field_presence = EXPLICIT];
}

message GrantSubvolumeExportAccessRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string subvolume_name = 4;
  string client_ip = 11;
}

message RevokeSubvolumeExportAccessRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string subvolume_name = 4;
  string client_ip = 11;
}

message CreateSubvolumeSnapshotRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string subvolume_name = 4;
  string group_name = 5;
  string snapshot_name = 6;
}

message DeleteSubvolumeSnapshotRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string subvolume_name = 4;
  string group_name = 5;
  string snapshot_name = 6;
}

message ListSubvolumeGroupsRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
}

message ListSubvolumeGroupsResponse {
  repeated SubvolumeGroup subvolume_groups = 1;
}

message CreateSubvolumeGroupRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
  uint64 quota_bytes = 11;
}

message UpdateSubvolumeGroupRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
  uint64 quota_bytes = 11;
}

message DeleteSubvolumeGroupRequest {
  string scope = 1;
  reserved 2;
  string volume_name = 3;
  string group_name = 4;
}

message ListBucketsRequest {
  string scope = 1;
  reserved 2;
}

message ListBucketsResponse {
  repeated Bucket buckets = 1;
  string service_uri = 2;
}

message CreateBucketRequest {
  string scope = 1;
  reserved 2;
  string bucket_name = 3;
  string owner = 11;
  string policy = 12;
  Bucket.ACL acl = 21;
}

message UpdateBucketRequest {
  string scope = 1;
  reserved 2;
  string bucket_name = 3;
  string owner = 11;
  string policy = 12;
  Bucket.ACL acl = 21;
}

message DeleteBucketRequest {
  string scope = 1;
  reserved 2;
  string bucket_name = 3;
}

message ListUsersRequest {
  string scope = 1;
  reserved 2;
}

message ListUsersResponse {
  repeated User users = 1;
  string service_uri = 2;
}

message CreateUserRequest {
  string scope = 1;
  reserved 2;
  string user_id = 3;
  string user_name = 11;
  bool suspended = 12;
}

message UpdateUserRequest {
  string scope = 1;
  reserved 2;
  string user_id = 3;
  string user_name = 11;
  bool suspended = 12;
}

message DeleteUserRequest {
  string scope = 1;
  reserved 2;
  string user_id = 3;
}

message CreateUserKeyRequest {
  string scope = 1;
  reserved 2;
  string user_id = 3;
}

message DeleteUserKeyRequest {
  string scope = 1;
  reserved 2;
  string user_id = 3;
  string access_key = 4;
}

message ListSMBSharesRequest {
  string scope = 1;
  reserved 2;
}

message ListSMBSharesResponse {
  repeated SMBShare smb_shares = 1;
}

message CreateSMBShareRequest {
  string scope = 1;
  reserved 2;
  string name = 3;
  uint64 size_bytes = 11;
  int32 port = 12;
  bool browsable = 21;
  bool read_only = 22;
  bool guest_ok = 31;
  repeated string valid_users = 32;
  SMBShare.CommonConfig common_config = 41;
  SMBShare.SecurityConfig security_config = 51;
}

message UpdateSMBShareRequest {
  string scope = 1;
  reserved 2;
  string name = 3;
  uint64 size_bytes = 11;
  int32 port = 12;
  bool browsable = 21;
  bool read_only = 22;
  bool guest_ok = 31;
  repeated string valid_users = 32;
  SMBShare.CommonConfig common_config = 41;
  SMBShare.SecurityConfig security_config = 51;
}

message ValidateSMBUserRequest {
  string realm = 1;
  string username = 2;
  string password = 3;
  string search_username = 4;
  bool tls = 5;
}

message ValidateSMBUserResponse {
  enum EntityType {
    ENTITY_TYPE_UNKNOWN = 0;
    ENTITY_TYPE_USER = 1;
    ENTITY_TYPE_GROUP = 2;
  }
  EntityType entity_type = 1;
}

message ListNFSExportsRequest {
  string scope = 1;
  string cluster_id = 2;
}

message ListNFSExportsResponse {
  repeated NfsExport nfs_exports = 1;
}

message ApplyNFSExportRequest {
  string scope = 1;
  string cluster_id = 2;
  CephFsTarget target = 3;
  NfsExportSpec spec = 4;
}

message GetNFSExportRequest {
  string scope = 1;
  string cluster_id = 2;
  string pseudo_path = 3;
}

message DeleteNFSExportRequest {
  string scope = 1;
  string cluster_id = 2;
  string pseudo_path = 3;
}