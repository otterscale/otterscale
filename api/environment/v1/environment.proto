edition = "2023";

package otterscale.environment.v1;

import "api/annotations.proto";
import "google/protobuf/empty.proto";

option go_package = "github.com/otterscale/otterscale/api/environment/v1;pb";

service EnvironmentService {
  rpc CheckHealth(CheckHealthRequest) returns (CheckHealthResponse) {
    option (otterscale.api.feature) = {
      name: "env-general"
    };
  };

  rpc GetPrometheus(GetPrometheusRequest) returns (Prometheus) {
    option (otterscale.api.feature) = {
      name: "env-general"
    };
  };

  rpc GetPremiumTier(GetPremiumTierRequest) returns (PremiumTier) {
    option (otterscale.api.feature) = {
      name: "env-general"
    };
  };

  rpc UpdateConfig(UpdateConfigRequest) returns (google.protobuf.Empty) {
    option (otterscale.api.feature) = {
      name: "env-debug"
    };
  };
}

message CheckHealthRequest {}

message CheckHealthResponse {
  enum Status {
    STATUS_UNKNOWN = 0;
    STATUS_OK = 11;
    STATUS_NOT_INSTALLED = 21;
  }
  Status status = 1;
}

message UpdateConfigRequest {
  string maas_url = 1;
  string maas_key = 2;
  string maas_version = 3;
  string juju_controller = 11;
  repeated string juju_controller_addresses = 12;
  string juju_username = 13;
  string juju_password = 14;
  string juju_ca_cert = 15;
  string juju_cloud_name = 21;
  string juju_cloud_region = 22;
  string juju_charmhub_api_url = 23;
  reserved 31 to 32;
  string micro_k8s_config = 33;
}

message Prometheus {
  reserved 1;
  string base_url = 2;
}

message GetPrometheusRequest {}

message PremiumTier {
  enum Level {
    LEVEL_BASIC = 0;
    LEVEL_ADVANCED = 1;
    LEVEL_ENTERPRISE = 2;
  }
  Level level = 1;
}

message GetPremiumTierRequest {}
